{"version":3,"sources":["../../models/products.js"],"names":["module","exports","sequelize","DataTypes","products","define","id","allowNull","autoIncrement","primaryKey","type","BIGINT","title","TEXT","unique","args","msg","description","link","isEmpty","INTEGER","require","defaultValue","get","getDataValue","set","value","setDataValue","quantity","price","DOUBLE","is_active","createdAt","DATE","literal","updatedAt","associate","models","hasMany","productsphotos","belongsTo","categories","onDelete","foreignKey","manufacturers"],"mappings":"AAAA;;AAEAA,OAAOC,OAAP,GAAiB,UAACC,SAAD,EAAYC,SAAZ,EAA0B;AACvC,QAAMC,WAAWF,UAAUG,MAAV,CAAiB,UAAjB,EAA6B;AAC1CC,YAAI;AACAC,uBAAW,KADX;AAEAC,2BAAe,IAFf;AAGAC,wBAAY,IAHZ;AAIAC,kBAAMP,UAAUQ;AAJhB,SADsC;AAO1CC,eAAQ;AACNF,kBAAOP,UAAUU,IADX;AAEJC,oBAAS;AACLC,sBAAM,IADD;AAELC,qBAAM;AAFD;AAFL,SAPkC;AAc1CC,qBAAc;AACVP,kBAAMP,UAAUU,IADN;AAEVN,uBAAY;AAFF,SAd4B;AAkB1CW,cAAO;AACLR,kBAAMP,UAAUU,IADX;AAEHN,uBAAW,IAFR;AAGHY,qBAAS;AACPH,qBAAK;AADE;AAHN,SAlBmC;AAyB1CN,cAAM;AACFA,kBAAOP,UAAUiB,OADf;AAEFC,qBAAS,IAFP;AAGFC,0BAAe,CAHb;AAIFC,iBAAK,eAAY;AACb,wBAAQ,KAAKC,YAAL,CAAkB,MAAlB,CAAR;AACI,yBAAK,CAAL;AACI,+BAAO,SAAP;AACJ,yBAAK,CAAL;AACI,+BAAO,QAAP;AAJR;AAOH,aAZC;AAaFC,iBAAK,aAAUC,KAAV,EAAiB;AAClB,wBAAQA,KAAR;AACI,yBAAK,SAAL;AACI,+BAAO,KAAKC,YAAL,CAAkB,MAAlB,EAA0B,CAA1B,CAAP;AACJ,yBAAK,QAAL;AACI,+BAAO,KAAKA,YAAL,CAAkB,MAAlB,EAA0B,CAA1B,CAAP;AAJR;AAMH;AApBC,SAzBoC;AA+C1CC,kBAAW;AACPlB,kBAAMP,UAAUiB;AADT,SA/C+B;AAkD1CS,eAAQ;AACJnB,kBAAMP,UAAU2B;AADZ,SAlDkC;AAqD1CC,mBAAY;AACRrB,kBAAOP,UAAUiB,OADT;AAERC,qBAAS,IAFD;AAGRC,0BAAe,CAHP;AAIRC,iBAAK,eAAY;AACb,wBAAQ,KAAKC,YAAL,CAAkB,WAAlB,CAAR;AACI,yBAAK,CAAL;AACI,+BAAO,SAAP;AACJ,yBAAK,CAAL;AACI,+BAAO,UAAP;AAJR;AAOH,aAZO;AAaRC,iBAAK,aAAUC,KAAV,EAAiB;AAClB,wBAAQA,KAAR;AACI,yBAAK,SAAL;AACI,+BAAO,KAAKC,YAAL,CAAkB,WAAlB,EAA+B,CAA/B,CAAP;AACJ,yBAAK,UAAL;AACI,+BAAO,KAAKA,YAAL,CAAkB,WAAlB,EAA+B,CAA/B,CAAP;AAJR;AAMH;AApBO,SArD8B;AA2E1CK,mBAAW;AACPtB,kBAAMP,UAAU8B,IADT;AAEPX,0BAAcpB,UAAUgC,OAAV,CAAkB,OAAlB;AAFP,SA3E+B;AA+E1CC,mBAAW;AACPzB,kBAAMP,UAAU8B,IADT;AAEPX,0BAAcpB,UAAUgC,OAAV,CAAkB,OAAlB;AAFP;AA/E+B,KAA7B,CAAjB;;AAsFA9B,aAASgC,SAAT,GAAqB,UAAUC,MAAV,EAAkB;AACnCjC,iBAASkC,OAAT,CAAiBD,OAAOE,cAAxB;;AAEAnC,iBAASoC,SAAT,CAAmBH,OAAOI,UAA1B,EAAsC;AAClCC,sBAAU,SADwB;AAElCC,wBAAY;AACRpC,2BAAW;AADH,aAFsB;AAKlCe,0BAAe;AALmB,SAAtC;AAOAlB,iBAASoC,SAAT,CAAmBH,OAAOO,aAA1B,EAAyC;AACrCF,sBAAU,SAD2B;AAErCC,wBAAY;AACRpC,2BAAW;AADH,aAFyB;AAKrCe,0BAAe;AALsB,SAAzC;AAOH,KAjBD;;AAmBA,WAAOlB,QAAP;AACH,CA3GD","file":"products.js","sourcesContent":["'use strict';\n\nmodule.exports = (sequelize, DataTypes) => {\n    const products = sequelize.define('products', {\n        id: {\n            allowNull: false,\n            autoIncrement: true,\n            primaryKey: true,\n            type: DataTypes.BIGINT\n        },\n        title : {\n          type : DataTypes.TEXT,\n            unique : {\n                args: true,\n                msg : 'the product with the provided title is already in use.'\n            }\n        },\n        description : {\n            type: DataTypes.TEXT,\n            allowNull : true\n        },\n        link : {\n          type: DataTypes.TEXT,\n            allowNull: true,\n            isEmpty: {\n              msg: ''\n            }\n        },\n        type: {\n            type : DataTypes.INTEGER,\n            require: true,\n            defaultValue : 1,\n            get: function () {\n                switch (this.getDataValue('type')) {\n                    case 1:\n                        return 'product';\n                    case 0:\n                        return 'course';\n                }\n\n            },\n            set: function (value) {\n                switch (value) {\n                    case 'product':\n                        return this.setDataValue('type', 1);\n                    case 'course':\n                        return this.setDataValue('type', 0);\n                }\n            }\n        },\n        quantity : {\n            type: DataTypes.INTEGER\n        },\n        price : {\n            type: DataTypes.DOUBLE\n        },\n        is_active : {\n            type : DataTypes.INTEGER,\n            require: true,\n            defaultValue : 1,\n            get: function () {\n                switch (this.getDataValue('is_active')) {\n                    case 1:\n                        return 'enabled';\n                    case 0:\n                        return 'disabled';\n                }\n\n            },\n            set: function (value) {\n                switch (value) {\n                    case 'enabled':\n                        return this.setDataValue('is_active', 1);\n                    case 'disabled':\n                        return this.setDataValue('is_active', 0);\n                }\n            }\n        },\n        createdAt: {\n            type: DataTypes.DATE,\n            defaultValue: sequelize.literal('NOW()')\n        },\n        updatedAt: {\n            type: DataTypes.DATE,\n            defaultValue: sequelize.literal('NOW()')\n        }\n    });\n\n\n    products.associate = function (models) {\n        products.hasMany(models.productsphotos);\n\n        products.belongsTo(models.categories, {\n            onDelete: \"CASCADE\",\n            foreignKey: {\n                allowNull: true\n            },\n            defaultValue : null\n        });\n        products.belongsTo(models.manufacturers, {\n            onDelete: \"CASCADE\",\n            foreignKey: {\n                allowNull: true\n            },\n            defaultValue : null\n        });\n    };\n\n    return products;\n};\n"]}